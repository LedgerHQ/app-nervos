. ./tests/lib.sh

@test "Create sUDT account" {

  # Allow contract data
  while read -n1 click; do
    clicks $click
    sleep 0.1
  done <<<"rRrlRLrRrRrlRLrRrlRL"

  run sendTransaction 3b0500001800000028000000380000003c000000da040000030000002c0000803501008000000080030000002c0000803501008000000080020000009e0400001c000000200000006e00000072000000ac0300007a0400000000000002000000f8de3bb47d055cdf460d93a2a6e1b05f7432f9777c8c474abf4eec1d4aee5d370000000001c1b2ae129fad7465aaa9acc9785f842ba3e6e8b8051d899defa89f5508a779580000000000000000003a0300000c000000a3010000970100000c00000038000000000000000000000033c4aa927cee3dde055820355d1d86c79daafd8de2781a69469afb572796c0c2010000005f0100001c00000020000000490000004d0000007d0000004b0100000000000001000000f8de3bb47d055cdf460d93a2a6e1b05f7432f9777c8c474abf4eec1d4aee5d370000000001000000000100000000000000000000000fdc433d61a63975c3523e806f91fb400c3a5110993b3e5e6275d7ce7fb7994901000000ce0000000c0000006d0000006100000010000000180000006100000014d0a4380a000000490000001000000030000000310000009bd7e06f3ecf4be0f2fcd2188b23f1b9fcc88e5d4b65a8637b17723bbda3cce801140000001e08c86ef36b9b13e8fbebcfd6af6905bc188ca861000000100000001800000061000000009d966b01000000490000001000000030000000310000009bd7e06f3ecf4be0f2fcd2188b23f1b9fcc88e5d4b65a8637b17723bbda3cce80114000000632c444199275d00b7c1fb65bf001d70bc609599140000000c000000100000000000000000000000970100000c0000003800000000000000000000005efe4be10b8703f5e4b49195518029f74c4325477c960539d0bdbc7761d1f6f8010000005f0100001c00000020000000490000004d0000007d0000004b0100000000000001000000f8de3bb47d055cdf460d93a2a6e1b05f7432f9777c8c474abf4eec1d4aee5d37000000000100000000010000000000000000000000acbeff01d0e4180df845581a70d709c7bc3069e9824e99fc1f145782a2cd7b6200000000ce0000000c0000006d00000061000000100000001800000061000000009d966b01000000490000001000000030000000310000009bd7e06f3ecf4be0f2fcd2188b23f1b9fcc88e5d4b65a8637b17723bbda3cce8011400000053d8aa5f8795be30afdf9294058f98fb4ea088d36100000010000000180000006100000030e9bbfe72000000490000001000000030000000310000009bd7e06f3ecf4be0f2fcd2188b23f1b9fcc88e5d4b65a8637b17723bbda3cce80114000000632c444199275d00b7c1fb65bf001d70bc609599140000000c000000100000000000000000000000ce0000000c0000006d0000006100000010000000180000006100000000ce624e030000004900000010000000300000003100000086a1c6987a4acbe1a887cca4c9dd2ac9fcb07405bbeda51b861b18bbf7492c4b0114000000632c444199275d00b7c1fb65bf001d70bc6095996100000010000000180000006100000014b3ef1b71000000490000001000000030000000310000009bd7e06f3ecf4be0f2fcd2188b23f1b9fcc88e5d4b65a8637b17723bbda3cce80114000000632c444199275d00b7c1fb65bf001d70bc609599240000000c0000002000000010000000000000000000000000000000000000000000000061000000080000005500000055000000100000005500000055000000410000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
  echo transaction 2>&1
  promptsCheck 5 tests/sudt-signing.txt
  rv="$(egrep "<= b'.*'9000" <(echo "$output")|cut -d"'" -f2)"
  txhash_and_witness=c69c52275bb4eba229d9a5225e0f45e904e2345a8a05c1a3b84bac2b41dd19aa55000000000000005500000010000000550000005500000041000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
  run check_signature "058000002c80000135800000000000000100000005" "$txhash_and_witness" "$rv"

  # Disallow contract data
  while read -n1 click; do
    clicks $click
    sleep 0.1
  done <<<"rRrlRLrRrRrlRLrRrlRL"
}
